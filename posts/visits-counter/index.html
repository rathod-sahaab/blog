<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>GitHub profile visit counter - Backend Basics [0] | Everything Engineering</title><meta name=keywords content="backend,nodejs,http,cookies,svg"><meta name=description content="You might have seen visits counters on some GitHub profiles displaying how many visits a profile has, but do you know how they work, join me as I go in excruciating details on how to make something like that."><meta name=author content="Abhay"><link rel=canonical href=https://abhay.rs/blog/posts/visits-counter/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/blog/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://abhay.rs/blog/favicon.svg><link rel=icon type=image/png sizes=16x16 href=https://abhay.rs/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://abhay.rs/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://abhay.rs/blog/apple-touch-icon.png><link rel=mask-icon href=https://abhay.rs/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css integrity=sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js integrity=sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})'></script><meta property="og:title" content="GitHub profile visit counter - Backend Basics [0]"><meta property="og:description" content="You might have seen visits counters on some GitHub profiles displaying how many visits a profile has, but do you know how they work, join me as I go in excruciating details on how to make something like that."><meta property="og:type" content="article"><meta property="og:url" content="https://abhay.rs/blog/posts/visits-counter/"><meta property="og:image" content="https://abhay.rs/blog/%3Cimage%20path/url%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-19T14:23:34+00:00"><meta property="article:modified_time" content="2021-07-19T14:23:34+00:00"><meta property="og:site_name" content="Everything Engineering"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://abhay.rs/blog/%3Cimage%20path/url%3E"><meta name=twitter:title content="GitHub profile visit counter - Backend Basics [0]"><meta name=twitter:description content="You might have seen visits counters on some GitHub profiles displaying how many visits a profile has, but do you know how they work, join me as I go in excruciating details on how to make something like that."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://abhay.rs/blog/posts/"},{"@type":"ListItem","position":3,"name":"GitHub profile visit counter - Backend Basics [0]","item":"https://abhay.rs/blog/posts/visits-counter/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"GitHub profile visit counter - Backend Basics [0]","name":"GitHub profile visit counter - Backend Basics [0]","description":"You might have seen visits counters on some GitHub profiles displaying how many visits a profile has, but do you know how they work, join me as I go in excruciating details on how to make something like that.","keywords":["backend","nodejs","http","cookies","svg"],"articleBody":"Why are we here? Pardon the philosophical headings, they make writing blogs interesting for me.\nYou might have came across some GitHub profiles with a counter that keeps track of how many visits did that page got.\nAbhay Raj Singh's github profile screenshot to show profile visits couter As you can see in the image above the counter at the bottom shows 6 i.e. there have been 6 visits to the page. To see the current value go to my GitHub profile.\nNumber of visits to this blog page.\nWe will learn how can we make our own and some hacks to increase the counter. You can find the source code on the github repo backend-basics.\nHow does it work? Simple, we use the the good old AJAX/fetch request. Yeah, about that, see we can’t have JavaScript on GitHub or any sane site where users can post things that will be shown to other users (usernames, blogs, etc.). Because of bad things called XSS or cross site scripting. If someone is able to run JavaScript by posting they get almost full control over user’s browser. At best you get some good kid making auto starring repositories or auto tweeting tweets, at worst, anything is possible.\nThat is the reason we can’t have the good old AJAX/fetch request, dang it! can’t even say AJAX/fetch. Jokes aside, we had to find a way around this to display dynamic content, and someone did.\nImages A picture something-something a thousand words…\n– Not me\nWe all know and love images, they make our websites beautiful and are almost always receive by a seperate GET request that fetched the page which contained the image.\nwhat I mean by that, is, let’s say you request for page example.com/index.html\n\u003chtml\u003e \u003chead\u003e ... \u003c/head\u003e \u003cbody\u003e \u003cimg src=\"example.com/image.png\" alt=\"png\" /\u003e \u003c/body\u003e \u003c/html\u003e your browser will first a request to get index.html\nGET /index.html then a request to get image.png.\nGET /image.png NOTE: The “seperate request” part is less true of HTTP 2 with server push than for HTTP 1.1 but that’s for another day.\nIt’s not required to import image from the same domain you can also do given that your server send appropriate CORS headers.\n\u003chtml\u003e \u003chead\u003e ... \u003c/head\u003e \u003cbody\u003e \u003cimg src=\"realimage.com/image.png\" alt=\"png\" /\u003e \u003c/body\u003e \u003c/html\u003e This doesn’t have to be a static image at all, you can paint every pixel of a 4K image and send it when you like! But do it before request is declared TIMEDOUT by the browser, so yeah not THAT lazily.\nHence, we can generate image on our server and send it when requested, it may take some time to load, but hey! atleast we got it dynamic. What should we generate? let me think… Idea! a visits counter :D, wait -_-.\nThe idea is not very new and is surely not a result of GitHub profile thingy. Remember those build passing badges they use the same principle.\nFull disclosure that badge is stolen from Hugo, the tool I used to make this blog! checkout this blog’s theme.\nSVG: Scalable Vector Graphics Painting pixels is hard, that’s why you need whole another computing device called GPU. If you want to host your backend in the cloud and need a GPU that’s going to cost lot more than just a CPU and rendering images with CPU alone is slow. Not that the GPU would be worth or even effective for the purpose of a counter with width and height of at most 300 pixels.\nBecause rendering images i.e. painting pixels is slow, our requests will have more latency, throughput will be less and other bad things I cannot make up remember.\nLuckily, smart people came up with a better image format , the SVG. What is SVG you ask? SVGs are just texts that tells the drawing program (here, the browser) what to draw.\n","wordCount":"2169","inLanguage":"en","image":"https://abhay.rs/blog/%3Cimage%20path/url%3E","datePublished":"2021-07-19T14:23:34Z","dateModified":"2021-07-19T14:23:34Z","author":{"@type":"Person","name":"Abhay"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://abhay.rs/blog/posts/visits-counter/"},"publisher":{"@type":"Organization","name":"Everything Engineering","logo":{"@type":"ImageObject","url":"https://abhay.rs/blog/favicon.svg"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://abhay.rs/blog accesskey=h title="Everything Engineering (Alt + H)"><svg style="margin-bottom:-.3em;border-radius:0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="30" height="30"><svg width="30" height="30" viewBox="0 0 99.682 99.682" xmlns="http://www.w3.org/2000/svg"><path d="M0 10.807v78.19h46.972V73.438H15.657V57.731h23.486v-15.61H15.657V26.416h31.315v-15.61zm99.682.0v78.19H52.71V73.438h31.315V57.731H60.539v-15.61h23.486V26.416H52.71v-15.61z" fill="currentcolor"/></svg><style>@media(prefers-color-scheme:light){:root{filter:none}}</style></svg>Everything Engineering</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://abhay.rs/blog/series/ title=series><span>series</span></a></li><li><a href=https://abhay.rs/blog/tags/ title=tags><span>tags</span></a></li><li><a href=https://abhay.rs title=abhay.rs><span>abhay.rs</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://abhay.rs/blog>Home</a>&nbsp;»&nbsp;<a href=https://abhay.rs/blog/posts/>Posts</a></div><h1 class=post-title>GitHub profile visit counter - Backend Basics [0]</h1><div class=post-description>You might have seen visits counters on some GitHub profiles displaying how many visits a profile has, but do you know how they work, join me as I go in excruciating details on how to make something like that.</div><div class=post-meta><span title='2021-07-19 14:23:34 +0000 UTC'>19192, July 19</span>&nbsp;·&nbsp;11 min&nbsp;·&nbsp;2169 words&nbsp;·&nbsp;Abhay&nbsp;|&nbsp;<a href=https://github.com/rathod-sahaab/blog/edit/dev/content/posts/backend-basics-0/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#how-does-it-work>How does it work?</a><ul><li><a href=#images>Images</a></li></ul></li><li><a href=#svg-scalable-vector-graphics>SVG: Scalable Vector Graphics</a></li><li><a href=#making-the-visit-counter-svg>Making the visit counter SVG</a><ul><li><a href=#finally-making-the-server>Finally, making the server</a></li><li><a href=#svg-handler>SVG handler</a></li><li><a href=#cors>CORS</a></li><li><a href=#unique-visits>Unique visits</a></li><li><a href=#why-you-dont-want-to-use-unique-visits>Why you don&rsquo;t want to use unique visits</a></li><li><a href=#hacks>Hacks</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><h1 id=why-are-we-here>Why are we here?<a hidden class=anchor aria-hidden=true href=#why-are-we-here>#</a></h1><p><em>Pardon the philosophical headings, they make writing blogs interesting for me.</em></p><p>You might have came across some GitHub profiles with a counter that keeps track of how many visits did that page got.</p><figure><img src=/blog/posts/visits-counter/images/rs-gh-profile.png alt="Abhay Raj Singh's github profile screenshot to show profile visits couter"><figcaption>Abhay Raj Singh's github profile screenshot to show profile visits couter</figcaption></figure><p>As you can see in the image above the counter at the bottom shows 6 i.e. there have been 6 visits to the page. To see the current value go to <a href=https://github.com/rathod-sahaab>my GitHub profile</a>.</p><p>Number of visits to this blog page.</p><p><img loading=lazy src=https://profile-counter.glitch.me/rathod-sahaab-blog-visiter-counter/count.svg#center alt="Visitors count for this blog post"></p><p>We will learn how can we make our own and some hacks to increase the counter. You can find the source code on the github repo <a href=https://github.com/rathod-sahaab/backend-basics/tree/dev/visits-counter>backend-basics</a>.</p><h2 id=how-does-it-work>How does it work?<a hidden class=anchor aria-hidden=true href=#how-does-it-work>#</a></h2><p>Simple, we use the the good old AJAX/fetch request. Yeah, about that, see we can&rsquo;t have JavaScript on GitHub or any sane site where users can post things that will be shown to other users (usernames, blogs, etc.). Because of bad things called XSS or cross site scripting. If someone is able to run JavaScript by posting they get almost full control over user&rsquo;s browser. At best you get some good kid making auto starring repositories or auto tweeting tweets, at worst, anything is possible.</p><p>That is the reason we can&rsquo;t have the good old AJAX/fetch request, dang it! can&rsquo;t even say AJAX/fetch. Jokes aside, we had to find a way around this to display dynamic content, and someone did.</p><h3 id=images>Images<a hidden class=anchor aria-hidden=true href=#images>#</a></h3><blockquote><p>A picture something-something a thousand words&mldr;</p><p>– Not me</p></blockquote><p>We all know and love images, they make our websites beautiful and are almost always receive by a seperate GET request that fetched the page which contained the image.</p><p>what I mean by that, is, let&rsquo;s say you request for page <code>example.com/index.html</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    ...
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;example.com/image.png&#34;</span> <span class=na>alt</span><span class=o>=</span><span class=s>&#34;png&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>your browser will first a request to get <code>index.html</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /index.html
</span></span></span></code></pre></div><p>then a request to get <code>image.png</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-http data-lang=http><span class=line><span class=cl><span class=err>GET /image.png
</span></span></span></code></pre></div><p><strong>NOTE:</strong> <em>The &ldquo;seperate request&rdquo; part is less true of <code>HTTP 2</code> with server push than for <code>HTTP 1.1</code> but that&rsquo;s for another day.</em></p><p>It&rsquo;s not required to import image from the same domain you can also do given that your server send appropriate <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS>CORS</a> headers.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- example.com/index.html --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    ...
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;realimage.com/image.png&#34;</span> <span class=na>alt</span><span class=o>=</span><span class=s>&#34;png&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>This doesn&rsquo;t have to be a static image at all, you can paint every pixel of a 4K image and send it when you like! But do it before request is declared <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/408>TIMEDOUT</a> by the browser, so yeah not THAT lazily.</p><p>Hence, we can generate image on our server and send it when requested, it may take some time to load, but hey! atleast we got it dynamic. What should we generate? let me think&mldr; Idea! a visits counter :D, wait -_-.</p><p>The idea is not very new and is surely not a result of GitHub profile thingy. Remember those build passing badges they use the same principle.</p><p><img loading=lazy src=https://goreportcard.com/badge/github.com/gohugoio/hugo#center alt="Go Report Card"></p><p>Full disclosure that badge is stolen from <a href=https://gohugo.io>Hugo</a>, the tool I used to make this blog! checkout <a href=https://github.com/adityatelange/hugo-PaperMod/>this blog&rsquo;s theme</a>.</p><h2 id=svg-scalable-vector-graphics>SVG: Scalable Vector Graphics<a hidden class=anchor aria-hidden=true href=#svg-scalable-vector-graphics>#</a></h2><p>Painting pixels is hard, that&rsquo;s why you need whole another computing device called GPU. If you want to host your backend in the cloud and need a GPU that&rsquo;s going to cost lot more than just a CPU and rendering images with CPU alone is slow. Not that the GPU would be worth or even effective for the purpose of a counter with width and height of at most 300 pixels.</p><p>Because rendering images i.e. painting pixels is slow, our requests will have more latency, throughput will be less and other bad things I cannot make up remember.</p><p>Luckily, smart people came up with a better image format , the <a href=https://developer.mozilla.org/en-US/docs/Web/SVG>SVG</a>. What is SVG you ask? SVGs are just texts that tells the drawing program (here, the browser) what to draw.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-svg data-lang=svg><span class=line><span class=cl><span class=nt>&lt;svg</span> <span class=na>height=</span><span class=s>&#34;100&#34;</span> <span class=na>width=</span><span class=s>&#34;100&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;circle</span> <span class=na>cx=</span><span class=s>&#34;50&#34;</span> <span class=na>cy=</span><span class=s>&#34;50&#34;</span> <span class=na>r=</span><span class=s>&#34;42&#34;</span> <span class=na>fill=</span><span class=s>&#34;teal&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;text</span>
</span></span><span class=line><span class=cl>  	<span class=na>x=</span><span class=s>&#34;50&#34;</span>
</span></span><span class=line><span class=cl>	<span class=na>y=</span><span class=s>&#34;57&#34;</span>
</span></span><span class=line><span class=cl>	<span class=na>text-anchor=</span><span class=s>&#34;middle&#34;</span>
</span></span><span class=line><span class=cl>	<span class=na>fill=</span><span class=s>&#34;white&#34;</span>
</span></span><span class=line><span class=cl>	<span class=na>font-family=</span><span class=s>&#34;sans-serif&#34;</span>
</span></span><span class=line><span class=cl>	<span class=na>font-weight=</span><span class=s>&#34;bold&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>  	%s
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/text&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/svg&gt;</span>
</span></span></code></pre></div><p>In the code above, we tell the drawing program(the browser) to make a SVG image 100x100 in size and a teal colored circle with x-center at 50, y-center at 50 and radius 42, after that write <code>%s</code> on that circle.</p><p align=center><svg height="100" width="100"><circle cx="50" cy="50" r="42" fill="teal"/><text x="50" y="57" text-anchor="middle" fill="#fff" font-family="sans-serif" font-weight="bold">%s</text></svg></p><p>What else? Sky is the limit! check out this <a href=https://dev.to/stackfindover/top-20-svg-animation-in-codepen-jn0>blog post by stackfindover</a>. Want to make some cool svg art, checkout OpenSource application <a href=https://inkscape.org>Inkscape</a>.</p><p>But, why use SVG? Because SVG is just text manipulating SVG and changing it&rsquo;s value is super easy and fast. So, the answer is <strong>performance</strong>.</p><p>You may be wondering why <code>%s</code>? Our original goal was to make an image with count written on it, obviously we should write in text tag but how to we get that?</p><p>If you ever programmed in <code>C</code> you may have came across <code>printf</code> what it does is replaces placeholder with actual data and print it we use it like.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Hi! I am %s.&#34;</span><span class=p>,</span> <span class=s>&#34;Abhay&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// prints: Hi! I am Abhay.
</span></span></span></code></pre></div><p>Here <code>%</code> denotes that this it is a placeholder and <code>s</code> denotes it&rsquo;s placeholder for a string, in this case <code>Abhay</code>.</p><p>Well, now we can finally write some code.</p><h2 id=making-the-visit-counter-svg>Making the visit counter SVG<a hidden class=anchor aria-hidden=true href=#making-the-visit-counter-svg>#</a></h2><p>Our svg template roughly looks like</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-svg data-lang=svg><span class=line><span class=cl><span class=nt>&lt;svg&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;circle/&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;text&gt;</span> %s <span class=nt>&lt;/text&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/svg&gt;</span>
</span></span></code></pre></div><p>If write it as string, in minified form we get</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>template</span> <span class=o>=</span> <span class=s2>&#34;&lt;svg&gt; &lt;circle/&gt; &lt;text&gt; %s &lt;/text&gt; &lt;/svg&gt;&#34;</span><span class=p>;</span>
</span></span></code></pre></div><p>And then we use our good friend <a href=https://www.npmjs.com/package/sprintf-js>sprintf-js</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kd>let</span> <span class=nx>count</span>: <span class=kt>number</span> <span class=o>=</span> <span class=mi>6</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>sprintf</span><span class=p>(</span><span class=nx>template</span><span class=p>,</span> <span class=nx>count</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=c1>// result: &lt;svg&gt; &lt;circle/&gt; &lt;text&gt; 6 &lt;/text&gt; &lt;/svg&gt;&#39;
</span></span></span></code></pre></div><p align=center><svg height="100" width="100"><circle cx="50" cy="50" r="42" fill="teal"/><text x="50" y="57" text-anchor="middle" fill="#fff" font-family="sans-serif" font-weight="bold">6</text></svg></p><p>Abhay, we should use <code>%d</code> for integers. Yes! we should but we may want to represent number in our own custom format, example:</p><p align=center><svg height="100" width="100"><circle cx="50" cy="50" r="42" fill="teal"/><text x="50" y="57" text-anchor="middle" fill="#fff" font-family="sans-serif" font-weight="bold">1,440</text></svg><svg height="100" width="100"><circle cx="50" cy="50" r="42" fill="teal"/><text x="50" y="57" text-anchor="middle" fill="#fff" font-family="sans-serif" font-weight="bold"><tspan text-anchor="middle" x="50" dy="-.6em">Twenty</tspan><tspan text-anchor="middle" x="50" dy="1.2em">one</tspan></text></svg><svg height="100" width="100"><circle cx="50" cy="50" r="42" fill="teal"/><text x="50" y="57" text-anchor="middle" fill="#fff" font-family="sans-serif" font-weight="bold">XXI</text></svg></p><p>And for that using strings are less hassle. In <code>Twenty one</code> we insert svg code below in place of <code>%s</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-svg data-lang=svg><span class=line><span class=cl><span class=nt>&lt;tspan</span> <span class=na>text-anchor=</span><span class=s>&#34;middle&#34;</span> <span class=na>x=</span><span class=s>&#34;50&#34;</span> <span class=na>dy=</span><span class=s>&#34;-0.6em&#34;</span><span class=nt>&gt;</span>Twenty<span class=nt>&lt;/tspan&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;tspan</span> <span class=na>text-anchor=</span><span class=s>&#34;middle&#34;</span> <span class=na>x=</span><span class=s>&#34;50&#34;</span> <span class=na>dy=</span><span class=s>&#34;1.2em&#34;</span><span class=nt>&gt;</span>one<span class=nt>&lt;/tspan&gt;</span>
</span></span></code></pre></div><p>This wouldn&rsquo;t have been possible with <code>%d</code> and we had to modify svg everytime we wanted to change how output looks.</p><p>Abhay, but you could have easily used JavaScript string substitution.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>counterSvg</span> <span class=o>=</span> <span class=sb>`&lt;svg&gt;... </span><span class=si>${</span><span class=nx>count</span><span class=si>}</span><span class=sb>&lt;/svg&gt;`</span><span class=p>;</span>
</span></span></code></pre></div><p>Of-course, but no. The thing is we rarely write SVGs by hand, mostly we use programs like <a href=https://inkscape.org>Inkscape</a> to create SVGs. so we don&rsquo;t have the svg as string in our program to add <code>${expression}</code>.</p><p>We load our image at startup from a file and store it in a string, that&rsquo;s why we need <code>sprinf</code> to format an already existing string.</p><p>What my svg template looks like, which I made using Inkscape.</p><figure><img src=/blog/posts/visits-counter/images/counter-image.png alt="Counter Image"><figcaption>Counter Image</figcaption></figure><h3 id=finally-making-the-server>Finally, making the server<a hidden class=anchor aria-hidden=true href=#finally-making-the-server>#</a></h3><p>A simple Node express server looks like.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// src/server.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=o>*</span> <span class=kr>as</span> <span class=nx>express</span> <span class=kr>from</span> <span class=s2>&#34;express&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>main() {</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;Server started&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>main</span><span class=p>();</span>
</span></span></code></pre></div><p>Abhay, we don&rsquo;t need a main function! yes but most of the time we do, so database connection functions are <code>async</code> and we have to <code>await</code> them, but we can only use <code>await</code> in an <code>async</code> function. Thus it&rsquo;s good to know about this pattern.</p><h3 id=svg-handler>SVG handler<a hidden class=anchor aria-hidden=true href=#svg-handler>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// src/server.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>count</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>// store in file/DB for persistence
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s2>&#34;/svg&#34;</span><span class=p>,</span> <span class=p>(</span><span class=nx>_</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>count</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s2>&#34;content-type&#34;</span><span class=p>,</span> <span class=s2>&#34;image/svg+xml&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nx>createCounterSvg</span><span class=p>(</span><span class=nx>count</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>we set header <code>content-type: image/svg+xml</code> and send whatever <code>createCounterSvg(count)</code> returns, clear by name it returns counter&rsquo;s svg with count in it.</p><p>You might have noticed we use <code>/svg</code> and not <code>/count.svg</code> that is to reinforce the fact that extension does not matter here <code>content-type: image/svg+xml</code> matters the most. Your image tag will look like.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;http://example.com/svg&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p>or in markdown</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-md data-lang=md><span class=line><span class=cl>![<span class=nt>Image</span>](<span class=na>http://example.com/svg</span>)
</span></span></code></pre></div><h4 id=createcountersvg>createCounterSvg<a hidden class=anchor aria-hidden=true href=#createcountersvg>#</a></h4><p>It&rsquo;s a function that returns SVG image with counter value replaced.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// src/create-counter-svg.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=o>*</span> <span class=kr>as</span> <span class=nx>fs</span> <span class=kr>from</span> <span class=s2>&#34;fs&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>sprintf</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;sprintf-js&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>SVG_TEMPLATE</span> <span class=o>=</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s2>&#34;./counter-optim.svg&#34;</span><span class=p>).</span><span class=nx>toString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>createCounterSvg</span> <span class=o>=</span> <span class=p>(</span><span class=nx>count</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=kt>string</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>sprintf</span><span class=p>(</span><span class=nx>SVG_TEMPLATE</span><span class=p>,</span> <span class=nx>count</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>createCounterSvg</span><span class=p>;</span>
</span></span></code></pre></div><p>First we read the file <code>counter-optim.svg</code> using</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>const</span> <span class=nx>SVG_TEMPLATE</span> <span class=o>=</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s2>&#34;./counter-optim.svg&#34;</span><span class=p>).</span><span class=nx>toString</span><span class=p>();</span>
</span></span></code></pre></div><p>The file is read only once and then stored in the memory.</p><p>When we call <code>createCounterSvg</code> it call <code>sprintf</code> for us and we receive the final svg as a string.</p><h4 id=testing-it-out>Testing it out<a hidden class=anchor aria-hidden=true href=#testing-it-out>#</a></h4><p>We need some thing that requests the image so we can display it right. So we server <code>index.html</code> from our server</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// src/server.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>express</span><span class=p>.</span><span class=kr>static</span><span class=p>(</span><span class=s2>&#34;public&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>,</span> <span class=p>(</span><span class=nx>_</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// serve index.html
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=nx>sendFile</span><span class=p>(</span><span class=s2>&#34;index.html&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>and our <code>index.html</code> looks like</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- public/index.html --&gt;</span>
</span></span><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;en&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    ...
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Visits SVG demo<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>This displays the svg for visits<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;http://localhost:3000/svg&#34;</span> <span class=na>alt</span><span class=o>=</span><span class=s>&#34;SVG image for visit count&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><h5 id=voila-it-works>Voila! it works!<a hidden class=anchor aria-hidden=true href=#voila-it-works>#</a></h5><p>Screenshot<figure><img src=/blog/posts/visits-counter/images/visits-counter-demo.png alt="Visits Counter Demo"><figcaption>Visits Counter Demo</figcaption></figure></p><h3 id=cors>CORS<a hidden class=anchor aria-hidden=true href=#cors>#</a></h3><p>It only works for <code>localhost:3000</code> and when deployed and you try to request the svg from a domain other than where svg server is hosted you will get CORS errors in your browser.</p><p>To fix that we must send <code>access-control-allow-origin</code> header. We can either add the header manually or use the package <a href=https://www.npmjs.com/package/cors>cors</a>. Using the package cors is better to the serve needs of a real project, so I will be doing that here too.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// server.ts
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=o>*</span> <span class=kr>as</span> <span class=nx>cors</span> <span class=kr>from</span> <span class=s2>&#34;cors&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>cors</span><span class=p>());</span>
</span></span></code></pre></div><p>And errors go to sleep :)</p><h3 id=unique-visits>Unique visits<a hidden class=anchor aria-hidden=true href=#unique-visits>#</a></h3><p>If you refresh this blog page the counter I added at the top will increment, it will increment as many times you refresh. We will look how can you make it so that only unique visits increase the counter. We will also look into why you don&rsquo;t want to that.</p><h4 id=why-it-happens>Why it happens<a hidden class=anchor aria-hidden=true href=#why-it-happens>#</a></h4><p>In our code we count the number of times the image is requested, every time you refresh the page image gets requested again and counter increments.</p><h4 id=how-to-get-unique-visit>How to get unique visit<a hidden class=anchor aria-hidden=true href=#how-to-get-unique-visit>#</a></h4><p>To only increment on unique visits we need to remember a user already requested the image before hence visited the page before, in that case we won&rsquo;t increment the counter but will just return the current value.</p><p>The question is how do we remember that user already visited? The answer is <strong>cookies</strong>. HTTP: <em>Hyper Text Transfer Protocol</em> is a stateless protocol which means server doesn&rsquo;t remember anything about your previous request and treats every request an independent one. Unfortunately, users don&rsquo;t like to send same data again and again. The solution was cookies, You(server) collect data from users save it, and give users a ticket so next time they come you can identify them and serve their needs.</p><p>Mostly, the cookies contain unique values but we don&rsquo;t need to differentiate between users we just want to know if they visited us already or not. If user already visited they will have the cookie if they didn&rsquo;t they will not have the cookie. So in case they have the cookie we will deliver the counter without modification, in case they don&rsquo;t have a cookie we will increment the counter send the incremented counter and also send a cookie which marking that user visited like markings you get after vacination.</p><h4 id=code>Code<a hidden class=anchor aria-hidden=true href=#code>#</a></h4><p>How do we get cookie? well cookie is in header of HTTP request by the user, you can get cookie from express <code>getHeader</code> but in a real project <a href=https://www.npmjs.com/package/cookie-parser>cookie-parser</a> package should be used.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// server.ts
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=o>*</span> <span class=kr>as</span> <span class=nx>cookieParser</span> <span class=kr>from</span> <span class=s2>&#34;cookie-parser&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>COOKIE_NAME</span> <span class=o>=</span> <span class=s2>&#34;visited&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>cookieParser</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s2>&#34;/svg&#34;</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>visited</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>cookies</span><span class=p>[</span><span class=nx>COOKIE_NAME</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>visited</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// if cookie name visited doesn&#39;t exist it&#39;s a new visit
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// increase the count
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>count</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// attach a cookie named visited
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>res</span><span class=p>.</span><span class=nx>cookie</span><span class=p>(</span><span class=nx>COOKIE_NAME</span><span class=p>,</span> <span class=s2>&#34;yes&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>httpOnly</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>setHeader</span><span class=p>(</span><span class=s2>&#34;content-type&#34;</span><span class=p>,</span> <span class=s2>&#34;image/svg+xml&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nx>createCounterSvg</span><span class=p>(</span><span class=nx>count</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><figure><img src=/blog/posts/visits-counter/images/visits-counter-cookie.png alt=Cookie><figcaption>Cookie</figcaption></figure><h3 id=why-you-dont-want-to-use-unique-visits>Why you don&rsquo;t want to use unique visits<a hidden class=anchor aria-hidden=true href=#why-you-dont-want-to-use-unique-visits>#</a></h3><p>If you plan to use it for multiple counter by linking with a database
Example: when you request <code>example.com/svg/1</code> counter 1 is returned and <code>example.com/svg/2</code> returns counter2. As counter 1 and counter2 will have different cookies to work correctly. You can use array as value of cookie to determine which paths user requested earlier i.e. your cookie will look like <code>visited=[1,2,3...]</code> but this approach is not scalable if you want to make something available to all, it might be good enough for personal use though.</p><h3 id=hacks>Hacks<a hidden class=anchor aria-hidden=true href=#hacks>#</a></h3><ol><li>You can keep requesting the image by refreshing or get request to the URL this will increase the counter.</li><li>You can use somebody else&rsquo;s counter on your profile. Below I use <a href=https://github.com/ryanlanciaux>ryanlanciaux</a>&rsquo;s counter, the author of the counter in start of this blog.
<img loading=lazy src=https://profile-counter.glitch.me/ryanlanciaux/count.svg#center%22 alt></li><li>Less cheaty way You can just share counter with your friend(s) and it will show total profile visits of you and your friends.</li></ol><p>I am not going to detail you how to do that, learn yourself.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>It was fun learning and applying while making this project, but the question is can we use this for real. The answer is&mldr; it depends. If you want just one counter it&rsquo;s good to go, if you want multiple counters you will have to tinker with the code a bit to make it work.</p><p>Why do you want to host it? Well if you want an image with distinct design, go ahead.</p><p>Maybe, I will post the updates with database integration for multiple images, and possibly an option to upload your own designs.</p><p>You can find the source code on the github repo <a href=https://github.com/rathod-sahaab/backend-basics/tree/dev/visits-counter>backend-basics</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://abhay.rs/blog/tags/backend/>backend</a></li><li><a href=https://abhay.rs/blog/tags/nodejs/>nodejs</a></li><li><a href=https://abhay.rs/blog/tags/http/>http</a></li><li><a href=https://abhay.rs/blog/tags/cookies/>cookies</a></li><li><a href=https://abhay.rs/blog/tags/svg/>svg</a></li></ul><nav class=paginav><a class=prev href=https://abhay.rs/blog/posts/maths-from-chaos-0/><span class=title>« Prev</span><br><span>Bouncing Bead - Maths from chaos [0]</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share GitHub profile visit counter - Backend Basics [0] on twitter" href="https://twitter.com/intent/tweet/?text=GitHub%20profile%20visit%20counter%20-%20Backend%20Basics%20%5b0%5d&amp;url=https%3a%2f%2fabhay.rs%2fblog%2fposts%2fvisits-counter%2f&amp;hashtags=backend%2cnodejs%2chttp%2ccookies%2csvg"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitHub profile visit counter - Backend Basics [0] on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fabhay.rs%2fblog%2fposts%2fvisits-counter%2f&amp;title=GitHub%20profile%20visit%20counter%20-%20Backend%20Basics%20%5b0%5d&amp;summary=GitHub%20profile%20visit%20counter%20-%20Backend%20Basics%20%5b0%5d&amp;source=https%3a%2f%2fabhay.rs%2fblog%2fposts%2fvisits-counter%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitHub profile visit counter - Backend Basics [0] on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fabhay.rs%2fblog%2fposts%2fvisits-counter%2f&title=GitHub%20profile%20visit%20counter%20-%20Backend%20Basics%20%5b0%5d"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitHub profile visit counter - Backend Basics [0] on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fabhay.rs%2fblog%2fposts%2fvisits-counter%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitHub profile visit counter - Backend Basics [0] on whatsapp" href="https://api.whatsapp.com/send?text=GitHub%20profile%20visit%20counter%20-%20Backend%20Basics%20%5b0%5d%20-%20https%3a%2f%2fabhay.rs%2fblog%2fposts%2fvisits-counter%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitHub profile visit counter - Backend Basics [0] on telegram" href="https://telegram.me/share/url?text=GitHub%20profile%20visit%20counter%20-%20Backend%20Basics%20%5b0%5d&amp;url=https%3a%2f%2fabhay.rs%2fblog%2fposts%2fvisits-counter%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share GitHub profile visit counter - Backend Basics [0] on ycombinator" href="https://news.ycombinator.com/submitlink?t=GitHub%20profile%20visit%20counter%20-%20Backend%20Basics%20%5b0%5d&u=https%3a%2f%2fabhay.rs%2fblog%2fposts%2fvisits-counter%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://abhay.rs/blog>Everything Engineering</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>